const m='{% block payrexx_payment_settings_icon %} <sw-icon name="payrexx-p-color" multicolor></sw-icon> {% endblock %}',{Component:g}=Shopware;g.register("payrexx-payment-settings-icon",{template:m});const u=`{% block sw_settings_content_card_slot_plugins %} {% parent %} <sw-settings-item :label="$tc('payrexx-payment.module.title')" :to="{ name: 'payrexx.payment.index' }" :backgroundEnabled="false"> <template #icon> <img class="sw-settings-index__payrexx-icon" :src="'payrexxpaymentgatewaysw6/administration/plugin.png' | asset" :alt="Payrexx"> </template> </sw-settings-item> {% endblock %}`,{Component:d}=Shopware;d.override("sw-settings-index",{template:u});const y=`{% block payrexx_payment_settings %} <sw-page class="payrexx-payment"> {% block payrexx_payment_settings_header %} <template slot="smart-bar-header"> <h2> {{ $tc('sw-settings.index.title') }} <sw-icon name="small-arrow-medium-right" small></sw-icon> {{ $tc('payrexx-payment.settingsForm.title') }} </h2> </template> {% endblock %} {% block payrexx_payment_actions %} <template #smart-bar-actions> {% block payrexx_payment_settings_actions_feedback %} <sw-button @click="isSupportModalOpen = true" :disabled="false" variant="ghost" :square="false" :block="false" :isLoading="false"> {{ $tc('payrexx-payment.supportModal.supportButton') }} </sw-button> {% endblock %} {% block payrexx_payment_settings_actions_test %} <sw-button-process @click="onTest" :isLoading="isTesting" :processSuccess="isTestSuccessful" :disabled="credentialsMissing || isLoading"> {{ $tc('payrexx-payment.settingsForm.test') }} </sw-button-process> {% endblock %} {% block payrexx_payment_settings_actions_save %} <sw-button-process class="payrexx_payment_settings_actions__save-action" :isLoading="isLoading" :processSuccess="isSaveSuccessful" :disabled="isLoading || isTesting" variant="primary" @process-finish="saveFinish" @click="onSave"> {{ $tc('payrexx-payment.settingsForm.save') }} </sw-button-process> {% endblock %} </template> {% endblock %} {% block payrexx_payment_settings_content %} <template #content> <sw-modal v-if="isSupportModalOpen" @modal-close="isSupportModalOpen = false" :title="$tc('payrexx-payment.supportModal.title')" class="payrexx-support sw-modal--medium"> <sw-container columns="1fr 1fr"> <div class="payrexx-support__col"> <div class="payrexx-support__icon"> <sw-icon name="default-documentation-file" large="true"></sw-icon> </div> <p class="payrexx-support__desc"> {{ $tc('payrexx-payment.supportModal.manualDesc') }} </p> <sw-button :disabled="false" variant="primary" :square="false" :block="false" :isLoading="false" link="https://help.payrexx.com/integration/e-commerce/shopware-6"> {{ $tc('payrexx-payment.supportModal.manualButton') }} </sw-button> </div> <div class="payrexx-support__col"> <div class="payrexx-support__icon"> <sw-icon name="default-device-headset" large="true"></sw-icon> </div> <p class="payrexx-support__desc"> {{ $tc('payrexx-payment.supportModal.supportDesc') }} </p> <sw-button :disabled="false" variant="primary" :square="false" :block="false" :isLoading="false" link="mailto:support+shopware@payrexx.com"> {{ $tc('payrexx-payment.supportModal.supportButton') }} </sw-button> </div> </sw-container> </sw-modal> <sw-card-view> <sw-system-config ref="systemConfig" sales-channel-switchable inherit @config-changed="onConfigChange" domain="PayrexxPaymentGatewaySW6.settings"> </sw-system-config> </sw-card-view> </template> {% endblock %} </sw-page> {% endblock %}`,{Component:x,Mixin:i}=Shopware;x.register("payrexx-settings",{template:y,mixins:[i.getByName("notification"),i.getByName("sw-inline-snippet")],inject:["PayrexxPaymentSettingsService"],data(){return{config:{},isLoading:!1,isTesting:!1,isSaveSuccessful:!1,isTestSuccessful:!1,instanceNameFilled:!1,apiKeyFilled:!1,showValidationErrors:!1,isSupportModalOpen:!1}},computed:{credentialsMissing:function(){return!this.instanceNameFilled||!this.apiKeyFilled}},methods:{saveFinish(){this.isSaveSuccessful=!1},onSave(){if(this.isLoading=!0,this.credentialsMissing){this.showValidationErrors=!0,this.isLoading=!1;return}this.isSaveSuccessful=!1,this.$refs.systemConfig.saveAll().then(()=>{this.isLoading=!1,this.isSaveSuccessful=!0}).catch(()=>{this.isLoading=!1})},onTest(){this.isTesting=!0,this.isTestSuccessful=!1;let e={instanceName:this.getConfigValue("instanceName"),apiKey:this.getConfigValue("apiKey"),platform:this.getConfigValue("platform")};this.PayrexxPaymentSettingsService.validateApiCredentials(e).then(t=>{const s=t.credentialsValid;t.error,s?(this.createNotificationSuccess({title:this.$tc("payrexx-payment.settingsForm.messages.titleSuccess"),message:this.$tc("payrexx-payment.settingsForm.messages.messageTestSuccess")}),this.isTestSuccessful=!0):this.createNotificationError({title:this.$tc("payrexx-payment.settingsForm.messages.titleError"),message:this.$tc("payrexx-payment.settingsForm.messages.messageTestError")}),this.isTesting=!1}).catch(t=>{this.createNotificationError({title:this.$tc("payrexx-payment.settingsForm.messages.titleError"),message:this.$tc("payrexx-payment.settingsForm.messages.messageTestErrorGeneral")}),this.isTesting=!1})},onConfigChange(e){this.config=e,this.checkCredentialsFilled(),this.showValidationErrors=!1},getBind(e,t){return t!==this.config&&this.onConfigChange(t),this.showValidationErrors&&(e.name==="PayrexxPaymentGatewaySW6.settings.instanceName"&&!this.instanceNameFilled&&(e.config.error={code:1,detail:this.$tc("payrexx-payment.settingsForm.messages.messageNotBlank")}),e.name==="PayrexxPaymentGatewaySW6.settings.apiKey"&&!this.apiKeyFilled&&(e.config.error={code:1,detail:this.$tc("payrexx-payment.settingsForm.messages.messageNotBlank")})),e},checkCredentialsFilled(){this.instanceNameFilled=!!this.getConfigValue("instanceName"),this.apiKeyFilled=!!this.getConfigValue("apiKey")},getConfigValue(e){const t=this.$refs.systemConfig.actualConfigData.null;return this.$refs.systemConfig.currentSalesChannelId===null?this.config[`PayrexxPaymentGatewaySW6.settings.${e}`]:this.config[`PayrexxPaymentGatewaySW6.settings.${e}`]||t[`PayrexxPaymentGatewaySW6.settings.${e}`]}}});const h={"payrexx-payment":{module:{title:"Payrexx Payments",description:"Payrexx Payments"},settingsForm:{title:"Payrexx Payments",test:"Teste den API-Zugang",save:"Speichern",messages:{messageNotBlank:"Dieses Feld darf nicht leer sein.",titleSuccess:"Erfolg",titleError:"Fehler",messageTestSuccess:"Die API-Zugangsdaten sind korrekt.",messageTestError:"Die API-Zugangsdaten sind falsch.",messageTestErrorGeneral:"Die API-Zugangsdaten konnten nicht verifiziert werden.",messageSaveSuccess:"Die Plugin-Einstellungen wurden gespeichert.",messageSaveError:"Die Plugin-Einstellungen konnten nicht gespeichert werden."}},supportModal:{supportButton:"Support",title:"Wie können wir Ihnen helfen?",supportDesc:"Kontaktieren Sie unser Support-Team",manualButton:"Dokumentation",manualDesc:"Lesen Sie unsere Integrations Anleitung"}}},f={"payrexx-payment":{module:{title:"Payrexx Payments",description:"Payrexx Payments"},settingsForm:{title:"Payrexx Payments",test:"Teste den API-Zugang",save:"Speichern",messages:{messageNotBlank:"Dieses Feld darf nicht leer sein.",titleSuccess:"Erfolg",titleError:"Fehler",messageTestSuccess:"Die API-Zugangsdaten sind korrekt.",messageTestError:"Die API-Zugangsdaten sind falsch.",messageTestErrorGeneral:"Die API-Zugangsdaten konnten nicht verifiziert werden.",messageSaveSuccess:"Die Plugin-Einstellungen wurden gespeichert.",messageSaveError:"Die Plugin-Einstellungen konnten nicht gespeichert werden."}},supportModal:{supportButton:"Support",title:"Wie können wir Ihnen helfen?",supportDesc:"Kontaktieren Sie unser Support-Team",manualButton:"Dokumentation",manualDesc:"Lesen Sie unsere Integrations Anleitung"}}},S={"payrexx-payment":{module:{title:"Payrexx Payments",description:"Payrexx Payments"},settingsForm:{title:"Payrexx Payments",test:"Test API-Credentials",save:"Save",messages:{messageNotBlank:"This Field must not be empty.",titleSuccess:"Success",titleError:"Error",messageTestSuccess:"The API credentials are correct.",messageTestError:"The API credentials are wrong.",messageTestErrorGeneral:"The API-Credentials could not be verified.",messageSaveSuccess:"The plugin settings have been saved.",messageSaveError:"The plugin settings could not be saved."}},supportModal:{supportButton:"Support",title:"How Can We Help You?",supportDesc:"Contact our support team",manualButton:"Manual",manualDesc:"Read our integration manual"}}},{Module:w}=Shopware;w.register("payrexx-payment",{type:"plugin",name:"PayrexxPayment",title:"payrexx-payment.module.title",description:"payrexx-payment.module.description",version:"1.0.0",targetVersion:"1.0.0",icon:"regular-cog",snippets:{"de-DE":h,"de-CH":f,"en-GB":S},routes:{index:{component:"payrexx-settings",path:"index",meta:{parentPath:"sw.settings.index"}}},settingsItem:{name:"payrexx-payment-settings",group:"plugins",to:"payrexx.payment.index",icon:"regular-credit-card",backgroundEnabled:!0}});const{Application:r}=Shopware,o=Shopware.Classes.ApiService;class v extends o{constructor(t,s,n="payrexx_payment"){super(t,s,n)}validateApiCredentials(t){const s=this.getBasicHeaders();return this.httpClient.post(`_action/${this.getApiBasePath()}/validate-api-credentials`,{credentials:t},{headers:s}).then(n=>o.handleResponse(n))}}r.addServiceProvider("PayrexxPaymentSettingsService",e=>{const t=r.getContainer("init");return new v(t.httpClient,e.loginService)});const P=(()=>{const e=require.context("./svg",!1,/svg$/);return e.keys().reduce((t,s)=>{const l={name:s.split(".")[1].split("/")[1],functional:!0,render(c,p){const a=p.data;return c("span",{class:[a.staticClass,a.class],style:a.style,attrs:a.attrs,on:a.on,domProps:{innerHTML:e(s)}})}};return t.push(l),t},[])})(),{Component:k}=Shopware;P.map(e=>k.register(e.name,e));
//# sourceMappingURL=payrexx-payment-gateway-s-w6-De0LxPGc.js.map
